# Triage Classification Scenarios
# Tests 3-way call classification: CONVERSATION, IVR, VOICEMAIL
#
# PRINCIPLE: Only include scenarios that challenge the system.
# If it's obvious, don't test it. Find the breaking points.
#
# Usage:
#   python run.py --scenario <id>
#   python run.py --all
#   python run.py --sync-dataset

dataset_name: "demo_clinic_alpha/eligibility_verification/triage/classification"
dataset_description: "Edge case scenarios for eligibility verification call classification (insurance companies)"

classifier_llm:
  model: llama-3.3-70b-versatile

scenarios:
  # =============================================================================
  # HUMAN THAT SOUNDS AUTOMATED
  # =============================================================================

  - id: "1"
    expected_classification: CONVERSATION
    utterance: "Thank you for calling Blue Cross Blue Shield member services. My name is David, representative ID 54321. How may I assist you today?"
    reasoning: "Heavily scripted but human - includes personal name and rep ID"

  - id: "2"
    expected_classification: CONVERSATION
    utterance: "Good afternoon, Cigna provider relations, this is automated... I mean Amanda, how can I help?"
    reasoning: "Human corrects themselves after almost saying 'automated'"

  # =============================================================================
  # IVR THAT SOUNDS CONVERSATIONAL
  # =============================================================================

  - id: "3"
    expected_classification: IVR
    utterance: "Hi there! I'm your virtual assistant. What can I help you with today?"
    reasoning: "Conversational AI/virtual assistant - not a human"

  - id: "4"
    expected_classification: IVR
    utterance: "Hello, and thank you for your patience. A representative will be with you shortly."
    reasoning: "No 'Press X' but automated queue message"

  # =============================================================================
  # VOICEMAIL THAT SOUNDS LIKE HUMAN IS THERE
  # =============================================================================

  - id: "5"
    expected_classification: VOICEMAIL
    utterance: "Hey, it's Mike. Sorry I missed you. Leave me a message and I'll call you back."
    reasoning: "Casual personal voicemail - sounds like human but 'leave me a message' is key"

  - id: "6"
    expected_classification: VOICEMAIL
    utterance: "Hello? Hello? ...If you can hear me, please leave a message after the tone."
    reasoning: "Sounds like human at first, then reveals it's voicemail"

  # =============================================================================
  # AMBIGUOUS / PARTIAL / CORRUPTED
  # =============================================================================

  - id: "7"
    expected_classification: CONVERSATION
    utterance: "Yes"
    reasoning: "Single word - could be IVR confirmation, but human acknowledgment"

  - id: "8"
    expected_classification: CONVERSATION
    utterance: "Speaking."
    reasoning: "One-word confirmation - could be automated but typically human"

  - id: "9"
    expected_classification: CONVERSATION
    utterance: "Hmm?"
    reasoning: "Non-word vocalization - human sound"

  # =============================================================================
  # MIXED SIGNALS IN ONE UTTERANCE
  # =============================================================================

  - id: "10"
    expected_classification: CONVERSATION
    utterance: "Hi, before we begin, this call may be recorded for quality purposes. How can I help you?"
    reasoning: "Human with compliance disclaimer sounds like IVR opening"

  - id: "11"
    expected_classification: VOICEMAIL
    utterance: "You've reached us outside of business hours. If this is urgent, press 1 to page the on-call representative, otherwise leave a message."
    reasoning: "Mix of VM and IVR - but fundamentally voicemail system"

  - id: "12"
    expected_classification: IVR
    utterance: "One moment please while I look that up for you... I found your account. Press 1 to confirm."
    reasoning: "Conversational AI mid-flow - still IVR despite conversational tone"

  # =============================================================================
  # UNUSUAL FORMATS
  # =============================================================================

  - id: "13"
    expected_classification: CONVERSATION
    utterance: "[Background noise] Hello? [cough] Sorry, provider services."
    reasoning: "Background noise and human sounds indicate real human"

  - id: "14"
    expected_classification: VOICEMAIL
    utterance: "Leave a message."
    reasoning: "Extremely terse voicemail - no greeting, just instruction"

  # =============================================================================
  # CONVERSATIONAL AI / VIRTUAL ASSISTANTS
  # These are increasingly common - NOT human, but also NOT traditional IVR
  # =============================================================================

  - id: "15"
    expected_classification: IVR
    utterance: "Hello! I'm Eva, your virtual assistant for United Healthcare. I can help you check eligibility, prior authorization status, and more. What would you like to do today?"
    reasoning: "Named virtual assistant - conversational but still automated system"

  - id: "16"
    expected_classification: IVR
    utterance: "Hi there, I'm the Cigna digital assistant. I noticed you're calling from a provider's office. Are you calling about a patient's benefits?"
    reasoning: "AI detected caller context - sophisticated but still IVR"

  - id: "17"
    expected_classification: IVR
    utterance: "Thanks for calling Aetna! Before I connect you to a representative, can you tell me what you're calling about today? You can say things like 'check eligibility' or 'prior auth status.'"
    reasoning: "Conversational IVR pre-screening - mentions connecting to rep but is still automated"

  - id: "18"
    expected_classification: CONVERSATION
    utterance: "Hi, this is Jessica, I'm a virtual assistant... just kidding, real person here! How can I help you?"
    reasoning: "Human joking about being a bot - the correction is key"

  # =============================================================================
  # HYBRID HUMAN + SYSTEM PROMPTS
  # Human speaking but includes system-like elements
  # =============================================================================

  - id: "19"
    expected_classification: CONVERSATION
    utterance: "Thank you for calling Blue Cross Blue Shield. This is the provider eligibility department, Lisa speaking, representative ID 84521. For quality purposes, may I have your provider NPI?"
    reasoning: "Very scripted human - sounds robotic but includes personal name and ID"

  - id: "20"
    expected_classification: IVR
    utterance: "Thank you for calling provider services. This call may be recorded. Please hold while we connect you to the next available representative."
    reasoning: "No human name mentioned - automated queue message"

  - id: "21"
    expected_classification: CONVERSATION
    utterance: "Hold please... [hold music 5 sec]... Thank you for holding, this is the eligibility department, how may I direct your call?"
    reasoning: "Human returning from brief hold - includes human phrasing 'how may I direct'"

  # =============================================================================
  # CALLBACK / QUEUE SYSTEMS
  # =============================================================================

  - id: "22"
    expected_classification: IVR
    utterance: "Your estimated wait time is 15 minutes. To continue holding, stay on the line. To receive a callback when it's your turn, press 1. To leave a voicemail, press 2."
    reasoning: "Queue system with callback option - still IVR"

  - id: "23"
    expected_classification: IVR
    utterance: "Great news! Your callback request has been saved. We'll call you back at this number within the next 20 minutes. You may hang up now."
    reasoning: "Callback confirmation - automated even though conversational"

  - id: "24"
    expected_classification: VOICEMAIL
    utterance: "The representative you were waiting for is no longer available. Please leave a message or call back during business hours."
    reasoning: "Queue timeout to voicemail"

  # =============================================================================
  # AFTER-HOURS / DEPARTMENT CLOSURE
  # =============================================================================

  - id: "25"
    expected_classification: VOICEMAIL
    utterance: "Hello, you've reached Anthem's prior authorization department. We're currently experiencing high call volume and cannot take your call. Please leave a message."
    reasoning: "Live department redirecting to voicemail due to volume"

  - id: "26"
    expected_classification: IVR
    utterance: "Thank you for calling. Our office hours are Monday through Friday, 8 AM to 6 PM Eastern. If you know your party's extension, you may dial it now. Otherwise, please call back during business hours."
    reasoning: "After-hours but with extension option - still IVR system"

  # =============================================================================
  # AUTHENTICATION / VERIFICATION PROMPTS
  # =============================================================================

  - id: "27"
    expected_classification: IVR
    utterance: "I found your provider record. Your Tax ID ends in 4521, is that correct? Say yes or press 1 to confirm."
    reasoning: "Automated verification - conversational but system-driven"

  - id: "28"
    expected_classification: CONVERSATION
    utterance: "I'll need to verify your identity. Can you confirm your provider's Tax ID number?"
    reasoning: "Human asking for verification - natural phrasing vs automated template"

  # =============================================================================
  # TRANSFER / HANDOFF AMBIGUITY
  # =============================================================================

  - id: "29"
    expected_classification: IVR
    utterance: "One moment while I look up that information... I see you're calling about eligibility. Let me transfer you to the right department."
    reasoning: "Conversational AI mid-lookup - still automated despite human-like flow"

  - id: "30"
    expected_classification: CONVERSATION
    utterance: "Let me check on that... [keyboard sounds]... okay, I've got the patient pulled up. Go ahead."
    reasoning: "Human with audible typing - environmental sounds indicate real person"

  - id: "31"
    expected_classification: IVR
    utterance: "Please hold, I'm transferring you now. [brief silence] ...Thank you for holding. You've reached provider eligibility. Press 1 to verify benefits. Press 2 for prior auth."
    reasoning: "Transfer landed in another IVR menu, not a human"

  # =============================================================================
  # NOISE / TRANSCRIPTION ARTIFACTS
  # =============================================================================

  - id: "32"
    expected_classification: CONVERSATION
    utterance: "[static] ...can't hear you very well... [static] ...hello? Is someone there?"
    reasoning: "Human with connection issues - would an IVR acknowledge static?"

  - id: "33"
    expected_classification: IVR
    utterance: "[beep] Thank you for calling. [beep] For claims, press 1. [beep] For eligibility, press 2."
    reasoning: "IVR with audio artifacts - beeps don't make it human"

  - id: "34"
    expected_classification: CONVERSATION
    utterance: "...orry, I was on mute. This is provider services, how can I help?"
    reasoning: "Human recovering from mute - partial word and natural recovery"

  # =============================================================================
  # EXTREMELY SHORT / AMBIGUOUS
  # =============================================================================

  - id: "35"
    expected_classification: CONVERSATION
    utterance: "Provider services."
    reasoning: "Two-word answer - human terseness when busy"

  - id: "36"
    expected_classification: IVR
    utterance: "Provider services. Please hold."
    reasoning: "Same department name but with 'please hold' = automated"

  - id: "37"
    expected_classification: IVR
    utterance: "Mmhmm. And what is the member's date of birth?"
    reasoning: "Conversational AI mimicking human acknowledgment"
    is_edge_case: true

  # =============================================================================
  # BILINGUAL / MULTILINGUAL
  # =============================================================================

  - id: "38"
    expected_classification: CONVERSATION
    utterance: "Gracias por llamar, aquí habla Maria del departamento de verificación. ¿En qué puedo ayudarle?"
    reasoning: "Spanish-speaking human representative"

  - id: "39"
    expected_classification: CONVERSATION
    utterance: "Provider services, this is Kim. Do you need an interpreter? I speak Korean if that helps."
    reasoning: "Human offering language assistance"

  # =============================================================================
  # MISLEADING DEPARTMENT MENTIONS
  # =============================================================================

  - id: "40"
    expected_classification: CONVERSATION
    utterance: "You've reached provider services. This is Sandra. What's the member ID?"
    reasoning: "Same opening pattern but human name and direct question"

  # =============================================================================
  # TIMING / PACING CUES
  # =============================================================================

  - id: "41"
    expected_classification: IVR
    utterance: "Hello. [2 second pause] Welcome to Blue Cross. [2 second pause] For member services, press 1. [2 second pause] For provider services, press 2."
    reasoning: "Robotic pacing between phrases indicates IVR"
